<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="index, follow">
        
        <link rel="alternate" type="application/rss+xml" title="RSS" href="https://kawaneao1996.github.io/myblogs/rss.xml">
        
        <title> | MCP 使ってみた</title>

        <link rel="preload" href="https://kawaneao1996.github.io/myblogs/css/style.css" as="style">
        <link rel="stylesheet" href="https://raw.githack.com/Speyll/suCSS/main/reset-min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://raw.githack.com/Speyll/suCSS/main/suCSS-min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://kawaneao1996.github.io/myblogs/css/style.css">
        <link rel="stylesheet" href="https://kawaneao1996.github.io/myblogs/css/custom.css">

        <!-- Add favicon with appropriate sizes -->
        <link rel="icon" href="https:&#x2F;&#x2F;kawaneao1996.github.io&#x2F;myblogs/favicon.ico">
    </head>
    <body>
        
        
        
        
        <nav id="nav-bar">
            
            <a href="https:&#x2F;&#x2F;kawaneao1996.github.io&#x2F;myblogs" class="">
                
                Home
            </a>
            
            <a href="https:&#x2F;&#x2F;kawaneao1996.github.io&#x2F;myblogs&#x2F;blogs" class="">
                
                Blog
            </a>
            
            <a href="https:&#x2F;&#x2F;kawaneao1996.github.io&#x2F;myblogs&#x2F;about" class="">
                
                About
            </a>
            

            <div class="theme-toggle" id="theme-toggle" role="button" tabindex="0" aria-label="Toggle theme"
                data-icon-base="https://kawaneao1996.github.io/myblogs/icons.svg"
                data-icon-dark="#darkMode"
                data-icon-light="#lightMode"
                data-sound-src="https://kawaneao1996.github.io/myblogs/click.ogg">
                <svg class="icon">
                    <use id="theme-icon"></use>
                </svg>
            </div>
        </nav>

        <main>
            
<article class="post">
    <header class="post-header">
        
        <time datetime="2025-04-13">Published on:
            <span class="accent-data">2025-04-13</span>
        </time>
        

        

        <h1>MCP 使ってみた</h1>
    </header>


<div class="toc-container">
    <h2>Table of content</h2>
    <ul>
        
        <li>
            <a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#gai-yao">概要</a>
            
        </li>
        
        <li>
            <a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#bei-jing">背景</a>
            
        </li>
        
        <li>
            <a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#fang-fa">方法</a>
            
            <ul>
                
                <li><a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#qian-ti-tiao-jian">前提条件</a></li>
                
                <li><a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#github-noakusesutokunqu-de">Github のアクセストークン取得</a></li>
                
                <li><a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#settings-jsonhe-mcp-server-noshe-ding-wozhui-ji">settings.jsonへ MCP Server の設定を追記</a></li>
                
                <li><a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#mcp-sabanoqi-dong-dong-zuo-que-ren">MCP サーバの起動／動作確認</a></li>
                
                <li><a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#pull-request-zuo-cheng-noyi-lai">Pull Request 作成の依頼</a></li>
                
            </ul>
            
        </li>
        
        <li>
            <a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#kao-cha">考察</a>
            
        </li>
        
        <li>
            <a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#jie-lun">結論</a>
            
        </li>
        
        <li>
            <a href="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/#she-zu">蛇足</a>
            
        </li>
        
    </ul>
</div>


    <div class="post-content">
        <h2 id="gai-yao">概要</h2>
<ul>
<li>VS Code の<a href="https://docs.github.com/ja/copilot/building-copilot-extensions/building-a-copilot-agent-for-your-copilot-extension/about-copilot-agents">Github Copilot agent</a>と <a href="https://github.com/github/github-mcp-server">Github MCP Server</a>を連携させることで<a href="https://docs.devin.fm/jp">Devin</a>のような AI Agent を安価に構築することを試した
<ul>
<li>Github 上の issue を読み込んで Pull Request を作成することに成功した</li>
<li>Pull Request の精度は良くなかった。これは MCP というよりコンテキストの渡し方に問題があったと考えられる</li>
</ul>
</li>
</ul>
<h2 id="bei-jing">背景</h2>
<p>商用の AI エージェント、<a href="https://docs.devin.fm/jp">Devin</a>等は高コストであり、気軽に利用することはできなかった。</p>
<p>しかし最近登場した MCP と Copilot agent を組み合わせ、低コストの AI エージェントを作ることができればより効率のよい開発に繋がると考えた。</p>
<h2 id="fang-fa">方法</h2>
<h3 id="qian-ti-tiao-jian">前提条件</h3>
<ul>
<li>VSCode の agent mode が有効になっていること
<ul>
<li>やり方はググって
<ul>
<li>参考：
<ul>
<li><a href="https://code.visualstudio.com/blogs/2025/02/24/introducing-copilot-agent-mode/">https://code.visualstudio.com/blogs/2025/02/24/introducing-copilot-agent-mode/</a></li>
<li><a href="https://github.blog/jp/2025-04-07-github-copilot-agent-mode-activated/">https://github.blog/jp/2025-04-07-github-copilot-agent-mode-activated/</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/github/github-mcp-server#prerequisites">Github MCP Server 利用の前提条件</a>をクリアしていること</li>
</ul>
<h3 id="github-noakusesutokunqu-de">Github のアクセストークン取得</h3>
<p>Copilot に利用させるアクセストークンを Github で生成する。
（PC）Github のページ右上のアイコン押下 -&gt; <code>Setting</code> -&gt; <code>Developer Settings</code> -&gt; <code>Personal access tokens</code>から<code>Fine-grained tokens</code>を作成
<img src="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/./pic/20250412/1.png" alt="Githubの右上のアイコンをクリック" /></p>
<h4 id="she-ding-li">設定例</h4>
<p>アクセストークンにはエージェントに必要な最低限の権限のみを付与する。
今回はプライベートリポジトリにある issue と PR を扱うための権限のみを設定した。以下に設定例を記載しておく。</p>
<p><img src="https://kawaneao1996.github.io/myblogs/blogs/mcp-server/./pic/20250412/2.png" alt="アクセストークン設定例" /></p>
<p>補足：</p>
<ul>
<li>リポジトリは適当（一応固定したけどしなくてもいいかも）</li>
<li>code, issues, pull requests に関して権限を付与</li>
</ul>
<h3 id="settings-jsonhe-mcp-server-noshe-ding-wozhui-ji"><code>settings.json</code>へ MCP Server の設定を追記</h3>
<p>VSCode の設定(<code>Ctrl-,</code>)から<code>settings.json</code>を開き以下を記載する。
アクセストークンには Github で作成したアクセストークンを貼り付ける。</p>
<pre data-lang="json" style="background-color:#2b303b;color:#c0c5ce;" class="language-json "><code class="language-json" data-lang="json"><span>  &quot;</span><span style="color:#a3be8c;">mcp</span><span>&quot;: {
</span><span>    &quot;</span><span style="color:#a3be8c;">servers</span><span>&quot;: {
</span><span>      &quot;</span><span style="color:#a3be8c;">github</span><span>&quot;: {
</span><span>        &quot;</span><span style="color:#a3be8c;">command</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">docker</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">args</span><span>&quot;: [
</span><span>          &quot;</span><span style="color:#a3be8c;">run</span><span>&quot;,
</span><span>          &quot;</span><span style="color:#a3be8c;">-i</span><span>&quot;,
</span><span>          &quot;</span><span style="color:#a3be8c;">--rm</span><span>&quot;,
</span><span>          &quot;</span><span style="color:#a3be8c;">-e</span><span>&quot;,
</span><span>          &quot;</span><span style="color:#a3be8c;">GITHUB_PERSONAL_ACCESS_TOKEN</span><span>&quot;,
</span><span>          &quot;</span><span style="color:#a3be8c;">ghcr.io/github/github-mcp-server</span><span>&quot;
</span><span>        ],
</span><span>        &quot;</span><span style="color:#a3be8c;">env</span><span>&quot;: {
</span><span>          &quot;</span><span style="color:#a3be8c;">GITHUB_PERSONAL_ACCESS_TOKEN</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">&lt;アクセストークン&gt;</span><span>&quot;
</span><span>        }
</span><span>      }
</span><span>    }
</span><span>  }
</span></code></pre>
<p>参考：<a href="https://github.com/github/github-mcp-server#usage-with-vs-code">https://github.com/github/github-mcp-server#usage-with-vs-code</a></p>
<h3 id="mcp-sabanoqi-dong-dong-zuo-que-ren">MCP サーバの起動／動作確認</h3>
<p>※Docker を起動しておく</p>
<p>MCP サーバを起動するやり方はいくつかある。
<code>settings.json</code>に<code>起動</code>ボタンが表示されているなら押下して起動できる。
もしくはコマンドパレット<code>Ctrl + Shift + P</code>から<code>MCP: サーバの一覧表示</code>を出して github を選択してもできる。</p>
<p>MCP サーバを起動させたら、Copilot を agent モードにして、以下のプロンプトを入力し Github MCP Server が動いているか確認する。</p>
<p>（リポジトリ URL にプライベートリポジトリを指定する。 MCP のアクセストークンが正しく設定できていなければタスクが失敗する。）</p>
<p>プロンプト：</p>
<pre data-lang="text" style="background-color:#2b303b;color:#c0c5ce;" class="language-text "><code class="language-text" data-lang="text"><span>&lt;リポジトリURL&gt;のissue一覧を表示して
</span></code></pre>
<p>結果（参考）：</p>
<pre data-lang="md" style="background-color:#2b303b;color:#c0c5ce;" class="language-md "><code class="language-md" data-lang="md"><span>以下は、リポジトリ「memo-todo-app」の現在のオープンな Issue 一覧です：
</span><span>
</span><span style="color:#bf616a;">1. </span><span style="font-weight:bold;color:#ebcb8b;">**アプリ公開のロードマップ**</span><span style="color:#bf616a;"> (#1)
</span><span style="color:#bf616a;">
</span><span style="color:#bf616a;">   - </span><span style="font-weight:bold;color:#ebcb8b;">**内容**</span><span style="color:#bf616a;">: アプリ公開に向けたタスク一覧が記載されています。
</span><span style="color:#bf616a;">     - コードレビュー
</span><span style="color:#bf616a;">     - GCP にデプロイ
</span><span style="color:#bf616a;">     - 動作確認
</span><span style="color:#bf616a;">     - 広告を搭載
</span><span style="color:#bf616a;">     - 課金機能実装
</span><span style="color:#bf616a;">     - ドメインの取得
</span><span style="color:#bf616a;">     - LP の作成／マーケティング
</span><span style="color:#bf616a;">     - リリース
</span><span style="color:#bf616a;">   - </span><span style="font-weight:bold;color:#ebcb8b;">**作成日**</span><span style="color:#bf616a;">: 2025 年 4 月 13 日
</span><span style="color:#bf616a;">   - </span><span style="color:#d08770;">[Issue リンク](https://github.com/kawaneao1996/memo-todo-app/issues/1)
</span><span style="color:#bf616a;">
</span><span style="color:#bf616a;">2. </span><span style="font-weight:bold;color:#ebcb8b;">**ソースコード上の</span><span style="font-weight:bold;color:#a3be8c;">`any`</span><span style="font-weight:bold;color:#ebcb8b;">型を無くしコードの可読性を向上させる**</span><span style="color:#bf616a;"> (#2)
</span><span style="color:#bf616a;">
</span><span style="color:#bf616a;">   - </span><span style="font-weight:bold;color:#ebcb8b;">**内容**</span><span style="color:#bf616a;">: </span><span style="color:#a3be8c;">`any`</span><span style="color:#bf616a;">型を具体的な型に置き換え、コードの可読性と型安全性を向上させる提案。
</span><span style="color:#bf616a;">     - </span><span style="color:#a3be8c;">`any`</span><span style="color:#bf616a;">型の箇所を特定
</span><span style="color:#bf616a;">     - 適切な型定義を作成
</span><span style="color:#bf616a;">     - テストを実行し動作確認
</span><span style="color:#bf616a;">   - </span><span style="font-weight:bold;color:#ebcb8b;">**ラベル**</span><span style="color:#bf616a;">: </span><span style="color:#a3be8c;">`enhancement`</span><span style="color:#bf616a;">, </span><span style="color:#a3be8c;">`refactor`
</span><span style="color:#bf616a;">   - </span><span style="font-weight:bold;color:#ebcb8b;">**作成日**</span><span style="color:#bf616a;">: 2025 年 4 月 13 日
</span><span style="color:#bf616a;">   - </span><span style="color:#d08770;">[Issue リンク](https://github.com/kawaneao1996/memo-todo-app/issues/2)
</span><span style="color:#bf616a;">
</span><span style="color:#bf616a;">3. </span><span style="font-weight:bold;color:#ebcb8b;">**アプリケーションのタイトルと Favicon を設定する**</span><span style="color:#bf616a;"> (#3)
</span><span style="color:#bf616a;">   - </span><span style="font-weight:bold;color:#ebcb8b;">**内容**</span><span style="color:#bf616a;">: アプリのタイトルを「Google Drive マークダウンメモアプリ」に変更し、Favicon を設定する。
</span><span style="color:#bf616a;">     - 必要に応じて</span><span style="color:#a3be8c;">`index.html`</span><span style="color:#bf616a;">を編集
</span><span style="color:#bf616a;">   - </span><span style="font-weight:bold;color:#ebcb8b;">**作成日**</span><span style="color:#bf616a;">: 2025 年 4 月 13 日
</span><span style="color:#bf616a;">   - </span><span style="color:#d08770;">[Issue リンク](https://github.com/kawaneao1996/memo-todo-app/issues/3)
</span><span style="color:#bf616a;">
</span><span>必要な詳細や対応があればお知らせください！
</span></code></pre>
<h3 id="pull-request-zuo-cheng-noyi-lai">Pull Request 作成の依頼</h3>
<p>MCP サーバが動いているので、issue の内容を読み込み Pull Request を作成させた。</p>
<p>ただし Pull Request の精度は悪かった。原因としては以下が考えられる：</p>
<ul>
<li>コンテキストが不足していた</li>
<li>プロンプトが不十分だった</li>
<li>タスクの分割が不十分だった</li>
</ul>
<p>上記に関しては MCP とは関係がないのでここにはこれ以上書かないが、継続して改善していきたい。</p>
<h2 id="kao-cha">考察</h2>
<p>Copilot agent でタスクをこなすには、Claude Code や他のエージェントより細かい指示だしが必要という体感があった。
推論して試行錯誤する機能が他のエージェントと比較して弱いのだろうか？</p>
<p>ただここは改善される可能性があるので Copilot には今後も期待したい。</p>
<h2 id="jie-lun">結論</h2>
<p>GitHub Copilot Agent と GitHub MCP Server を用いた AI エージェント構築の可能性を示した。今後はコンテキストの渡し方を改善し、精度向上を目指す。</p>
<h2 id="she-zu">蛇足</h2>
<ul>
<li>
<p>最近 VSCode の利用アンケートに回答した。その内容から MS は Copilot を従量課金にするか、もっと値上げしたプランで Agent を使わせたいのかなって思った。</p>
</li>
<li>
<p>MCP が勃興すると SaaS が死ぬという言説をどっかの YouTube で見た。 SaaS の UI が AI Agent に置き換わる可能性は大いにあるよなあ。</p>
<ul>
<li>一方で MCP の仕様が大きく変わる可能性もあるので今 MCP でスタートアップに全力注ぐのはどうなの？って言説もあった。</li>
</ul>
</li>
<li>
<p>個人的にプログラミングや AI 関連で検索エンジン叩くと広告しか出てこない現状に死ぬほどイライラするので、検索はすべてエージェントにさせる未来が来てほしい</p>
<ul>
<li>Google ではなく DuckDuckGo 使うか...</li>
</ul>
</li>
<li>
<p>あとこの記事には書いていないが、<a href="https://docs.anthropic.com/ja/docs/agents-and-tools/claude-code/overview">Claude Code</a> も試してみてなかなか良かった。Agent としては Cline よりも精度が高く速い気がした。</p>
</li>
<li>
<p>Pull Request の作成は Claude Code のほうが精度がいいので Claude Code を MCP サーバとして利用すれば改善するかも</p>
<ul>
<li>（でもそれなら Claude Code を使えばいいじゃんという..）</li>
</ul>
</li>
<li>
<p>ちなみに Claude Code を MCP サーバとして利用できる（≠ Claude Desktop で MCP サーバを利用する）という話はどこかで読んだけど、出典はどっか行った。ウソかもしれん。</p>
</li>
<li>
<p>Claude Code から MCP サーバは利用できるのだろうか？（Claude Desktop からは利用できる）あとで調べたい。</p>
</li>
</ul>

    </div>

    
    <div class="post-tags">
        
        <a href="/tags/generative-ai" class="tag">#generative ai </a>
        
    </div>
    
</article>

        </main>

        <footer>
            <hr>
<div id="footer-container">
    <p>Made using <a target="_blank" rel="noopener noreferrer" href="https://github.com/Speyll/anemone">anemone</a> Zola theme</p>
</div>

        </footer>

        <!-- Move JS to end of body and add defer -->
        <script src="https://kawaneao1996.github.io/myblogs/js/script.js" defer></script>
    </body>
</html>
